<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Black Screen</title>
  

</head>
<body>
<!-- partial:index.partial.html -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real-Time Multilingual Transcript</title>
    <style>
        /* General Body and Page Styling */
        body {
            background-color: #000000;
            color: #e0e0e0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        /* Main container for all translation boxes */
        #translation-container {
            width: 90%;
            max-width: 1200px;
            display: flex;
            flex-direction: column;
            gap: 20px; /* Space between language boxes */
        }

        /* Styling for each individual language box */
        .translation-box {
            background-color: #1a1a1a;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 15px 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        /* Language Title (e.g., "English (en)") */
        .translation-box h2 {
            margin: 0 0 10px 0;
            font-size: 1.1em;
            font-weight: bold;
            color: #888;
            text-transform: uppercase;
        }

        /* The text content area where transcripts appear */
        .text-content {
            background-color: #0c0c0c;
            border-radius: 4px;
            padding: 10px;
            font-size: 1.2rem;
            line-height: 1.5; /* Essential for calculating height */
            
            /* --- This creates the 2-line box effect --- */
            max-height: 3.6rem; /* 1.2rem (font-size) * 1.5 (line-height) * 2 (lines) */
            overflow-y: auto;   /* Add a scrollbar when content exceeds max-height */
            
            white-space: pre-wrap; /* Preserve whitespace and wrap lines */
            word-wrap: break-word; /* Break long words to prevent horizontal overflow */
        }
        
        /* Special styling for Right-to-Left languages like Arabic */
        #translation-2 .text-content {
            direction: rtl;
            text-align: right;
            font-family: 'Tahoma', 'Arial', sans-serif; /* A font that supports Arabic well */
        }

        /* Custom scrollbar for a better look */
        .text-content::-webkit-scrollbar {
            width: 8px;
        }

        .text-content::-webkit-scrollbar-track {
            background: #1a1a1a;
        }

        .text-content::-webkit-scrollbar-thumb {
            background-color: #555;
            border-radius: 10px;
            border: 2px solid #1a1a1a;
        }
    </style>
</head>
<body>

    <div id="translation-container">
        <!-- English Box -->
        <div class="translation-box" id="transcript-1-box">
            <h2>English (en)</h2>
            <div class="text-content" id="transcript-1">Waiting for data...</div>
        </div>

        <!-- Spanish Box -->
        <div class="translation-box" id="translation-1-box">
            <h2>Spanish (es)</h2>
            <div class="text-content" id="translation-1"></div>
        </div>

        <!-- Arabic Box -->
        <div class="translation-box" id="translation-2-box">
            <h2>Arabic (ar)</h2>
            <div class="text-content" id="translation-2"></div>
        </div>

        <!-- Chinese Box -->
        <div class="translation-box" id="translation-3-box">
            <h2>Chinese (zh)</h2>
            <div class="text-content" id="translation-3"></div>
        </div>

        <!-- Indonesian Box -->
        <div class="translation-box" id="translation-4-box">
            <h2>Indonesian (id)</h2>
            <div class="text-content" id="translation-4"></div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const useMockData = false; 
            const API_URL = 'https://api.deafassistant.com/stream/LiteGetStream?streamName=mtw';
            const POLLING_INTERVAL = 1000; // 1 second
    
            // --- Language Name Mapping ---
            const languageNames = { af: "Afrikaans", am: "Amharic", ar: "Arabic", az: "Azerbaijani", be: "Belarusian", bg: "Bulgarian", bn: "Bengali", bs: "Bosnian", ca: "Catalan", ceb: "Cebuano", co: "Corsican", cs: "Czech", cy: "Welsh", da: "Danish", de: "German", el: "Greek", en: "English", eo: "Esperanto", es: "Spanish", et: "Estonian", eu: "Basque", fa: "Persian", fi: "Finnish", fil: "Filipino", fr: "French", fy: "Frisian", ga: "Irish", gd: "Scottish Gaelic", gl: "Galician", gu: "Gujarati", ha: "Hausa", haw: "Hawaiian", he: "Hebrew", hi: "Hindi", hmn: "Hmong", hr: "Croatian", ht: "Haitian Creole", hu: "Hungarian", hy: "Armenian", id: "Indonesian", ig: "Igbo", is: "Icelandic", it: "Italian", ja: "Japanese", jv: "Javanese", ka: "Georgian", kk: "Kazakh", km: "Khmer", kn: "Kannada", ko: "Korean", ku: "Kurdish (Kurmanji)", ky: "Kyrgyz", la: "Latin", lb: "Luxembourgish", lo: "Lao", lt: "Lithuanian", lv: "Latvian", mg: "Malagasy", mi: "Māori", mk: "Macedonian", ml: "Malayalam", mn: "Mongolian", mr: "Marathi", ms: "Malay", mt: "Maltese", my: "Burmese", ne: "Nepali", nl: "Dutch", no: "Norwegian", ny: "Chichewa", or: "Odia (Oriya)", pa: "Punjabi", pl: "Polish", ps: "Pashto", pt: "Portuguese", ro: "Romanian", ru: "Russian", rw: "Kinyarwanda", sd: "Sindhi", si: "Sinhala", sk: "Slovak", sl: "Slovenian", sm: "Samoan", sn: "Shona", so: "Somali", sq: "Albanian", sr: "Serbian", st: "Sesotho", su: "Sundanese", sv: "Swedish", sw: "Swahili", ta: "Tamil", te: "Telugu", tg: "Tajik", th: "Thai", tk: "Turkmen", tl: "Tagalog", tr: "Turkish", tt: "Tatar", ug: "Uyghur", uk: "Ukrainian", ur: "Urdu", uz: "Uzbek", vi: "Vietnamese", xh: "Xhosa", yi: "Yiddish", yo: "Yoruba", zh: "Chinese", zh_CN: "Chinese (Simplified)", zh_TW: "Chinese (Traditional)", zu: "Zulu" };
            // Get references to the <div> text content and <h2> labels
            const elements = {
                one: document.getElementById('transcript-1'),
                two: document.getElementById('translation-1'),
                three: document.getElementById('translation-2'),
                four: document.getElementById('translation-3'),
                five: document.getElementById('translation-4'),
            };
    
            const labels = {
                one: document.querySelector('#transcript-1-box h2'),
                two: document.querySelector('#translation-1-box h2'),
                three: document.querySelector('#translation-2-box h2'),
                four: document.querySelector('#translation-3-box h2'),
                five: document.querySelector('#translation-4-box h2'),
            };
    
            // Function to update the text in a box and scroll to the bottom
            const updateTextBox = (element, text) => {
                if (element && text !== undefined) {
                    element.innerText = text;
                    element.scrollTop = element.scrollHeight;
                }
            };
    
            // Function to update the language label dynamically
            const updateLabel = (labelElement, code) => {
                if (labelElement && code) {
                    const name = languageNames[code] || "Unknown";
                    labelElement.innerText = `${name} (${code})`;
                }
            };
    
            const fetchDataAndUpdate = async () => {
                try {
                    let data;
                    if (useMockData) {
                        data = getMockData();
                    } else {
                        const response = await fetch(API_URL);
                        if (!response.ok) {
                            throw new Error(`HTTP error! Status: ${response.status}`);
                        }
                        data = await response.json();
                    }

                    // --- Always show input transcript ---
                    updateTextBox(elements.one, data.transcript);
                    updateLabel(labels.one, data.inputLanguage);
                    document.getElementById("transcript-1-box").style.display = "block";

                    // --- Handle optional translations dynamically ---
                    const translations = [
                        { text: data.translation, code: data.outputLanguage, element: elements.two, label: labels.two, boxId: "translation-1-box" },
                        { text: data.translation2, code: data.outputLanguage2, element: elements.three, label: labels.three, boxId: "translation-2-box" },
                        { text: data.translation3, code: data.outputLanguage3, element: elements.four, label: labels.four, boxId: "translation-3-box" },
                        { text: data.translation4, code: data.outputLanguage4, element: elements.five, label: labels.five, boxId: "translation-4-box" }
                    ];

                    translations.forEach(t => {
                        if (t.text && t.code) {
                            updateTextBox(t.element, t.text);
                            updateLabel(t.label, t.code);
                            document.getElementById(t.boxId).style.display = "block";
                        } else {
                            document.getElementById(t.boxId).style.display = "none";
                        }
                    });

                } catch (error) {
                    console.error("Failed to fetch or process data:", error);
                    elements.one.innerText = `Error fetching data: ${error.message}`;
                }
            };
    
            const getMockData = () => {
                return {
                    "timestamp": new Date().toISOString(),
                    "roomName": "techtown",
                    "transcript": "Original English: Hello world",
                    "isActivelyStreaming": true,
                    "translation": "Spanish Translation: Hola mundo",
                    "translation2": "Arabic Translation: مرحبا بالعالم",
                    "inputLanguage": "en",
                    "outputLanguage": "es",
                    "outputLanguage2": "ar",
                    "outputLanguage3": "zh",
                    "translation3": "Chinese Translation: 你好，世界",
                    "outputLanguage4": "id",
                    "translation4": "Indonesian Translation: Halo dunia",
                };
            };
    
            fetchDataAndUpdate();
            setInterval(fetchDataAndUpdate, POLLING_INTERVAL);
        });
    </script>    

</body>
<!-- partial -->
  
</body>
</html>
